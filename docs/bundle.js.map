{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}return e})()","window.onload = function () {\n\n  let mainInputVal = <HTMLInputElement>document.getElementById(\"main-input\");\n  let itemCount = 0;\n  let ol = document.querySelector(\".item-list\");\n\n  interface Itemp {\n    todo: String;\n    check: Boolean;\n  }  \n\n  let arrItems: Array<Itemp> = [];\n\n  if (localStorage.getItem(\"todo\") !== undefined) {\n    arrItems = JSON.parse(localStorage.getItem(\"todo\")) || [];\n    outItems();\n  }\n\n\n  document.getElementById(\"btn-ok\").onclick = function () {\n    if (mainInputVal.value === \"\") {\n      mainInputVal.style.borderColor = \"red\";\n      return;\n    }\n    mainInputVal.style.borderColor = \"\";\n    addTask(mainInputVal.value);\n    mainInputVal.value = \"\";\n    outItems();\n    initButtons();\n  }\n  mainInputVal.onkeydown = function (event) {\n    if (event.keyCode === 13) {\n      document.getElementById(\"btn-ok\").click();\n    }\n  }\n  // Добавляем информацию об айтеме в массив, массив отправляем в LocalStorage \n  function addTask(text: String) {\n    itemCount++;\n    var temp: Itemp = {\n      todo: text,\n      check: false\n    }\n    arrItems.push(temp);\n    localStorage.setItem(\"todo\", JSON.stringify(arrItems));\n  }\n  // Вывод/обновление списка айтемов\n  function outItems() {\n    let fragment = document.createDocumentFragment();\n    let i = 0;\n    // Формирование и заполнение айтема\n    for (let key in arrItems) {\n      let checked: String = \"\";\n      if (arrItems[key].check) {\n        checked = \" checked='checked'\";\n      } else {\n        checked = \"\";\n      }\n      i++;\n      let itemList = document.createElement(\"li\");\n      itemList.classList.add(\"item\");\n      itemList.innerHTML =\n        `<input type=\"checkbox\" id=\"item-${i}\" ${checked}>\n        <label for=\"item-${i}\">${arrItems[key].todo}</label>\n        <button id=\"btn-save\"></button>\n        <div class=\"buttons\">\n          <button id=\"btn-delete\"></button>\n          <button id=\"btn-edit\"></button>\n        </div>`;\n      fragment.appendChild(itemList);\n    }\n    ol.innerHTML = '';\n    ol.appendChild(fragment);\n    initButtons();\n    checkCondition();\n  }\n  // Инициализация обработчиков кнопок существующих айтемов\n  function initButtons() {\n    let items = document.querySelectorAll(\"li.item\");\n    for (let i = 0; i < items.length; i++) {\n      (items[i].querySelector(\"#btn-delete\") as HTMLElement).onclick = deleteItem;\n      (items[i].querySelector(\"#btn-edit\") as HTMLElement).onclick = editItem;\n    }\n\n    function deleteItem() {\n      this.parentElement.parentElement.remove();\n      let thisInputNumber = this.parentElement.parentElement.querySelector(\"input\").id.slice(-1);\n\n      deleteFromArr(arrItems, Number(thisInputNumber) - 1);\n      localStorage.setItem(\"todo\", JSON.stringify(arrItems));\n      outItems();\n\n      function deleteFromArr(arr: Array<Itemp>, number: number) {\n        return arr.splice(number, 1)\n      }\n    }\n\n    function editItem() {\n      let input = this.parentElement.parentElement.querySelector(\"input\");\n      let thisInputNumber = input.id.slice(-1);\n      let label = this.parentElement.parentElement.querySelector(\"label\");\n      let btnSave = this.parentElement.parentElement.querySelector(\"#btn-save\");\n\n      btnSave.style.display = \"inline\";\n      let btnRed = this;\n      btnRed.style.display = \"none\";\n\n      btnSave.onclick = function () {\n        if (!input.value) {\n          input.value = label.innerText;\n        }\n        label.innerText = input.value;\n        label.style.display = \"inline\"; \n        input.setAttribute(\"type\", \"checkbox\");\n        input.classList.remove(\"edit-input\");        \n        btnSave.style.display = \"none\";\n        btnRed.style.display = \"\";\n        changeItem(arrItems, Number(thisInputNumber) - 1, input.value);\n        localStorage.setItem(\"todo\", JSON.stringify(arrItems));\n      }\n      input.setAttribute(\"type\", \"text\");\n      input.value = label.innerText;\n      input.classList.add(\"edit-input\");\n      label.style.display = \"none\";        \n      \n\n      function changeItem(arr: Array<Itemp>, number: number, str: String) {\n        return arr[number].todo = str;\n      }\n    }\n  }\n  // Инициализация проверки состояния айтема\n  function checkCondition() {\n    let itemsInList = document.querySelectorAll(\"li.item > input[type='checkbox']\");\n\n    for (let i = 0; i < itemsInList.length; i++) {\n      (itemsInList[i] as HTMLInputElement).onclick = function () {\n        let input = this;\n        let thisInputNumber = input.id.slice(-1);\n\n        if ((input as HTMLInputElement).type === \"text\") {\n          console.log(\"это текстовое поле\");\n          return false;\n        }\n\n        if (input.hasAttribute(\"checked\")) {\n          input.removeAttribute(\"checked\");\n          changeItemCheck(arrItems, Number(thisInputNumber) - 1, false);\n          localStorage.setItem(\"todo\", JSON.stringify(arrItems));\n        } else {\n          input.setAttribute(\"checked\", \"checked\");\n          changeItemCheck(arrItems, Number(thisInputNumber) - 1, true);\n          localStorage.setItem(\"todo\", JSON.stringify(arrItems));\n        }\n      }\n\n      function changeItemCheck(arr: Array<Itemp>, number: number, bool: Boolean) {\n        arr[number].check = bool;\n      }\n    }\n  }\n  // Инициализация кнопки очистки списка из LocalStorage\n  document.getElementById(\"btn-clear\").onclick = function () {\n    localStorage.clear();\n    ol.innerHTML = \"\";\n    itemCount = 0;\n    arrItems = [];\n  }\n\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBLE1BQU0sQ0FBQyxNQUFNLEdBQUc7SUFFZCxJQUFJLFlBQVksR0FBcUIsUUFBUSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUMzRSxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDbEIsSUFBSSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQU85QyxJQUFJLFFBQVEsR0FBaUIsRUFBRSxDQUFDO0lBRWhDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQztRQUMvQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO1FBQzFELFFBQVEsRUFBRSxDQUFDO0lBQ2IsQ0FBQztJQUdELFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxHQUFHO1FBQzFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxLQUFLLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5QixZQUFZLENBQUMsS0FBSyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7WUFDdkMsTUFBTSxDQUFDO1FBQ1QsQ0FBQztRQUNELFlBQVksQ0FBQyxLQUFLLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQztRQUNwQyxPQUFPLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVCLFlBQVksQ0FBQyxLQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ3hCLFFBQVEsRUFBRSxDQUFDO1FBQ1gsV0FBVyxFQUFFLENBQUM7SUFDaEIsQ0FBQyxDQUFBO0lBQ0QsWUFBWSxDQUFDLFNBQVMsR0FBRyxVQUFVLEtBQUs7UUFD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QUFLLEVBQUUsQ0FBQztRQUNyQixFQUFFLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNsQixTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDLENBQUE7QUFFSCxDQUFDLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfXJldHVybiBlfSkoKSIsIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgbGV0IG1haW5JbnB1dFZhbCA9IDxIVE1MSW5wdXRFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWFpbi1pbnB1dFwiKTtcbiAgbGV0IGl0ZW1Db3VudCA9IDA7XG4gIGxldCBvbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXRlbS1saXN0XCIpO1xuXG4gIGludGVyZmFjZSBJdGVtcCB7XG4gICAgdG9kbzogU3RyaW5nO1xuICAgIGNoZWNrOiBCb29sZWFuO1xuICB9ICBcblxuICBsZXQgYXJySXRlbXM6IEFycmF5PEl0ZW1wPiA9IFtdO1xuXG4gIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9cIikgIT09IHVuZGVmaW5lZCkge1xuICAgIGFyckl0ZW1zID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9cIikpIHx8IFtdO1xuICAgIG91dEl0ZW1zKCk7XG4gIH1cblxuXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYnRuLW9rXCIpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKG1haW5JbnB1dFZhbC52YWx1ZSA9PT0gXCJcIikge1xuICAgICAgbWFpbklucHV0VmFsLnN0eWxlLmJvcmRlckNvbG9yID0gXCJyZWRcIjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbWFpbklucHV0VmFsLnN0eWxlLmJvcmRlckNvbG9yID0gXCJcIjtcbiAgICBhZGRUYXNrKG1haW5JbnB1dFZhbC52YWx1ZSk7XG4gICAgbWFpbklucHV0VmFsLnZhbHVlID0gXCJcIjtcbiAgICBvdXRJdGVtcygpO1xuICAgIGluaXRCdXR0b25zKCk7XG4gIH1cbiAgbWFpbklucHV0VmFsLm9ua2V5ZG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tb2tcIikuY2xpY2soKTtcbiAgICB9XG4gIH1cbiAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+0LEg0LDQudGC0LXQvNC1INCyINC80LDRgdGB0LjQsiwg0LzQsNGB0YHQuNCyINC+0YLQv9GA0LDQstC70Y/QtdC8INCyIExvY2FsU3RvcmFnZSBcbiAgZnVuY3Rpb24gYWRkVGFzayh0ZXh0OiBTdHJpbmcpIHtcbiAgICBpdGVtQ291bnQrKztcbiAgICB2YXIgdGVtcDogSXRlbXAgPSB7XG4gICAgICB0b2RvOiB0ZXh0LFxuICAgICAgY2hlY2s6IGZhbHNlXG4gICAgfVxuICAgIGFyckl0ZW1zLnB1c2godGVtcCk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2RvXCIsIEpTT04uc3RyaW5naWZ5KGFyckl0ZW1zKSk7XG4gIH1cbiAgLy8g0JLRi9Cy0L7QtC/QvtCx0L3QvtCy0LvQtdC90LjQtSDRgdC/0LjRgdC60LAg0LDQudGC0LXQvNC+0LJcbiAgZnVuY3Rpb24gb3V0SXRlbXMoKSB7XG4gICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGxldCBpID0gMDtcbiAgICAvLyDQpNC+0YDQvNC40YDQvtCy0LDQvdC40LUg0Lgg0LfQsNC/0L7Qu9C90LXQvdC40LUg0LDQudGC0LXQvNCwXG4gICAgZm9yIChsZXQga2V5IGluIGFyckl0ZW1zKSB7XG4gICAgICBsZXQgY2hlY2tlZDogU3RyaW5nID0gXCJcIjtcbiAgICAgIGlmIChhcnJJdGVtc1trZXldLmNoZWNrKSB7XG4gICAgICAgIGNoZWNrZWQgPSBcIiBjaGVja2VkPSdjaGVja2VkJ1wiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tlZCA9IFwiXCI7XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgICBsZXQgaXRlbUxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgICBpdGVtTGlzdC5jbGFzc0xpc3QuYWRkKFwiaXRlbVwiKTtcbiAgICAgIGl0ZW1MaXN0LmlubmVySFRNTCA9XG4gICAgICAgIGA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJpdGVtLSR7aX1cIiAke2NoZWNrZWR9PlxuICAgICAgICA8bGFiZWwgZm9yPVwiaXRlbS0ke2l9XCI+JHthcnJJdGVtc1trZXldLnRvZG99PC9sYWJlbD5cbiAgICAgICAgPGJ1dHRvbiBpZD1cImJ0bi1zYXZlXCI+PC9idXR0b24+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCI+XG4gICAgICAgICAgPGJ1dHRvbiBpZD1cImJ0bi1kZWxldGVcIj48L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uIGlkPVwiYnRuLWVkaXRcIj48L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+YDtcbiAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKGl0ZW1MaXN0KTtcbiAgICB9XG4gICAgb2wuaW5uZXJIVE1MID0gJyc7XG4gICAgb2wuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgIGluaXRCdXR0b25zKCk7XG4gICAgY2hlY2tDb25kaXRpb24oKTtcbiAgfVxuICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LIg0LrQvdC+0L/QvtC6INGB0YPRidC10YHRgtCy0YPRjtGJ0LjRhSDQsNC50YLQtdC80L7QslxuICBmdW5jdGlvbiBpbml0QnV0dG9ucygpIHtcbiAgICBsZXQgaXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwibGkuaXRlbVwiKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAoaXRlbXNbaV0ucXVlcnlTZWxlY3RvcihcIiNidG4tZGVsZXRlXCIpIGFzIEhUTUxFbGVtZW50KS5vbmNsaWNrID0gZGVsZXRlSXRlbTtcbiAgICAgIChpdGVtc1tpXS5xdWVyeVNlbGVjdG9yKFwiI2J0bi1lZGl0XCIpIGFzIEhUTUxFbGVtZW50KS5vbmNsaWNrID0gZWRpdEl0ZW07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZGVsZXRlSXRlbSgpIHtcbiAgICAgIHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgbGV0IHRoaXNJbnB1dE51bWJlciA9IHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5pZC5zbGljZSgtMSk7XG5cbiAgICAgIGRlbGV0ZUZyb21BcnIoYXJySXRlbXMsIE51bWJlcih0aGlzSW5wdXROdW1iZXIpIC0gMSk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvZG9cIiwgSlNPTi5zdHJpbmdpZnkoYXJySXRlbXMpKTtcbiAgICAgIG91dEl0ZW1zKCk7XG5cbiAgICAgIGZ1bmN0aW9uIGRlbGV0ZUZyb21BcnIoYXJyOiBBcnJheTxJdGVtcD4sIG51bWJlcjogbnVtYmVyKSB7XG4gICAgICAgIHJldHVybiBhcnIuc3BsaWNlKG51bWJlciwgMSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0SXRlbSgpIHtcbiAgICAgIGxldCBpbnB1dCA9IHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKTtcbiAgICAgIGxldCB0aGlzSW5wdXROdW1iZXIgPSBpbnB1dC5pZC5zbGljZSgtMSk7XG4gICAgICBsZXQgbGFiZWwgPSB0aGlzLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwibGFiZWxcIik7XG4gICAgICBsZXQgYnRuU2F2ZSA9IHRoaXMucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuLXNhdmVcIik7XG5cbiAgICAgIGJ0blNhdmUuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lXCI7XG4gICAgICBsZXQgYnRuUmVkID0gdGhpcztcbiAgICAgIGJ0blJlZC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG5cbiAgICAgIGJ0blNhdmUub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFpbnB1dC52YWx1ZSkge1xuICAgICAgICAgIGlucHV0LnZhbHVlID0gbGFiZWwuaW5uZXJUZXh0O1xuICAgICAgICB9XG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9IGlucHV0LnZhbHVlO1xuICAgICAgICBsYWJlbC5zdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmVcIjsgXG4gICAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJjaGVja2JveFwiKTtcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImVkaXQtaW5wdXRcIik7ICAgICAgICBcbiAgICAgICAgYnRuU2F2ZS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIGJ0blJlZC5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgY2hhbmdlSXRlbShhcnJJdGVtcywgTnVtYmVyKHRoaXNJbnB1dE51bWJlcikgLSAxLCBpbnB1dC52YWx1ZSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9kb1wiLCBKU09OLnN0cmluZ2lmeShhcnJJdGVtcykpO1xuICAgICAgfVxuICAgICAgaW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICBpbnB1dC52YWx1ZSA9IGxhYmVsLmlubmVyVGV4dDtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJlZGl0LWlucHV0XCIpO1xuICAgICAgbGFiZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAgICAgICAgXG4gICAgICBcblxuICAgICAgZnVuY3Rpb24gY2hhbmdlSXRlbShhcnI6IEFycmF5PEl0ZW1wPiwgbnVtYmVyOiBudW1iZXIsIHN0cjogU3RyaW5nKSB7XG4gICAgICAgIHJldHVybiBhcnJbbnVtYmVyXS50b2RvID0gc3RyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0L7QstC10YDQutC4INGB0L7RgdGC0L7Rj9C90LjRjyDQsNC50YLQtdC80LBcbiAgZnVuY3Rpb24gY2hlY2tDb25kaXRpb24oKSB7XG4gICAgbGV0IGl0ZW1zSW5MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImxpLml0ZW0gPiBpbnB1dFt0eXBlPSdjaGVja2JveCddXCIpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVtc0luTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgKGl0ZW1zSW5MaXN0W2ldIGFzIEhUTUxJbnB1dEVsZW1lbnQpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBpbnB1dCA9IHRoaXM7XG4gICAgICAgIGxldCB0aGlzSW5wdXROdW1iZXIgPSBpbnB1dC5pZC5zbGljZSgtMSk7XG5cbiAgICAgICAgaWYgKChpbnB1dCBhcyBIVE1MSW5wdXRFbGVtZW50KS50eXBlID09PSBcInRleHRcIikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwi0Y3RgtC+INGC0LXQutGB0YLQvtCy0L7QtSDQv9C+0LvQtVwiKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXQuaGFzQXR0cmlidXRlKFwiY2hlY2tlZFwiKSkge1xuICAgICAgICAgIGlucHV0LnJlbW92ZUF0dHJpYnV0ZShcImNoZWNrZWRcIik7XG4gICAgICAgICAgY2hhbmdlSXRlbUNoZWNrKGFyckl0ZW1zLCBOdW1iZXIodGhpc0lucHV0TnVtYmVyKSAtIDEsIGZhbHNlKTtcbiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvZG9cIiwgSlNPTi5zdHJpbmdpZnkoYXJySXRlbXMpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiKTtcbiAgICAgICAgICBjaGFuZ2VJdGVtQ2hlY2soYXJySXRlbXMsIE51bWJlcih0aGlzSW5wdXROdW1iZXIpIC0gMSwgdHJ1ZSk7XG4gICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJ0b2RvXCIsIEpTT04uc3RyaW5naWZ5KGFyckl0ZW1zKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gY2hhbmdlSXRlbUNoZWNrKGFycjogQXJyYXk8SXRlbXA+LCBudW1iZXI6IG51bWJlciwgYm9vbDogQm9vbGVhbikge1xuICAgICAgICBhcnJbbnVtYmVyXS5jaGVjayA9IGJvb2w7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60L3QvtC/0LrQuCDQvtGH0LjRgdGC0LrQuCDRgdC/0LjRgdC60LAg0LjQtyBMb2NhbFN0b3JhZ2VcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJidG4tY2xlYXJcIikub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBvbC5pbm5lckhUTUwgPSBcIlwiO1xuICAgIGl0ZW1Db3VudCA9IDA7XG4gICAgYXJySXRlbXMgPSBbXTtcbiAgfVxuXG59Il19"}